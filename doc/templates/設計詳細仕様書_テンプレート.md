# [機能名] 設計詳細仕様書

## 文書情報
- **機能ID**: [F-XXX]
- **機能名**: [機能名]
- **作成日**: [YYYY-MM-DD]
- **更新日**: [YYYY-MM-DD]
- **作成者**: [担当者名]
- **バージョン**: 1.0
- **ステータス**: [Draft/Review/Approved]
- **関連ファイル**: 
  - 実装ファイル: [path/to/implementation.kt](mdc:path/to/implementation.kt)
  - テストファイル: [path/to/test.kt](mdc:path/to/test.kt)

## 変更履歴
| バージョン | 日付 | 変更種別 | 変更内容 | 作成者 | レビュア |
|-----------|------|----------|----------|--------|----------|
| 1.0 | [YYYY-MM-DD] | 新規作成 | 初版作成 | [担当者名] | [レビュア名] |

## 1. 概要
### 1.1 機能の目的
[この機能が解決する課題や目的を記述]

### 1.2 機能の範囲
[この機能が対象とする範囲を明確に定義]

### 1.3 前提条件
[機能実装・利用の前提となる条件]

### 1.4 制約事項
[技術的制約、業務的制約等]

## 2. 要件定義
### 2.1 機能要件
[機能が満たすべき要件を列挙]
- 要件1: [詳細説明]
- 要件2: [詳細説明]
- 要件3: [詳細説明]

### 2.2 非機能要件
#### 2.2.1 パフォーマンス要件
- [レスポンス時間、スループット等]

#### 2.2.2 セキュリティ要件
- [認証、認可、暗号化等]

#### 2.2.3 可用性要件
- [稼働率、復旧時間等]

#### 2.2.4 保守性要件
- [保守のしやすさ、拡張性等]

### 2.3 制約事項
- [技術的制約]
- [業務的制約]
- [リソース制約]

## 3. 設計仕様
### 3.1 アーキテクチャ設計
```
[アーキテクチャ図またはコンポーネント図を挿入]
```

#### 3.1.1 設計方針
- [設計の基本方針]
- [アーキテクチャパターンの選択理由]

#### 3.1.2 レイヤー構成
- **プレゼンテーション層**: [役割と責務]
- **ビジネスロジック層**: [役割と責務]
- **データアクセス層**: [役割と責務]

### 3.2 クラス設計
#### 3.2.1 主要クラス一覧
| クラス名 | 役割 | 主要メソッド |
|----------|------|-------------|
| [ClassName1] | [役割説明] | method1(), method2() |
| [ClassName2] | [役割説明] | method1(), method2() |

#### 3.2.2 クラス図
```
[クラス図を挿入]
```

#### 3.2.3 クラス詳細設計
##### [ClassName1]
```kotlin
class ClassName1 {
    // プロパティ
    val property1: String
    var property2: Int
    
    // メソッド
    fun method1(): ReturnType {
        // 処理概要
    }
    
    fun method2(param: ParamType): ReturnType {
        // 処理概要
    }
}
```

### 3.3 メソッド設計
#### 3.3.1 主要メソッド一覧
| メソッド名 | 入力 | 出力 | 処理概要 |
|-----------|------|------|----------|
| method1() | [入力パラメータ] | [戻り値] | [処理概要] |
| method2() | [入力パラメータ] | [戻り値] | [処理概要] |

#### 3.3.2 処理フロー
```
[シーケンス図またはフローチャートを挿入]
```

### 3.4 データ構造設計
#### 3.4.1 データモデル
```kotlin
data class DataModel(
    val id: String,
    val name: String,
    val createdAt: LocalDateTime,
    val updatedAt: LocalDateTime
)
```

#### 3.4.2 状態管理
```kotlin
data class FeatureState(
    val isLoading: Boolean = false,
    val data: List<DataModel> = emptyList(),
    val error: String? = null
)
```

## 4. インターフェース設計
### 4.1 UI設計（該当する場合）
#### 4.1.1 画面レイアウト
```
[画面モックアップまたはワイヤーフレームを挿入]
```

#### 4.1.2 画面遷移
```
[画面遷移図を挿入]
```

#### 4.1.3 ユーザーインタラクション
| 操作 | 画面要素 | 動作 |
|------|----------|------|
| [操作名] | [ボタン/フィールド名] | [動作説明] |

### 4.2 API設計（該当する場合）
#### 4.2.1 エンドポイント仕様
```
GET /api/v1/[resource]
POST /api/v1/[resource]
PUT /api/v1/[resource]/{id}
DELETE /api/v1/[resource]/{id}
```

#### 4.2.2 リクエスト・レスポンス形式
```json
// リクエスト例
{
  "field1": "value1",
  "field2": "value2"
}

// レスポンス例
{
  "status": "success",
  "data": {
    "id": "123",
    "field1": "value1"
  }
}
```

### 4.3 データベース設計（該当する場合）
#### 4.3.1 テーブル設計
```sql
CREATE TABLE table_name (
    id VARCHAR(255) PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

#### 4.3.2 ER図
```
[ER図を挿入]
```

## 5. 例外処理設計
### 5.1 例外パターン
| 例外パターン | 発生条件 | 処理方法 |
|-------------|----------|----------|
| [ExceptionType1] | [発生条件] | [処理方法] |
| [ExceptionType2] | [発生条件] | [処理方法] |

### 5.2 エラーハンドリング
```kotlin
try {
    // 主処理
} catch (e: SpecificException) {
    // 特定例外の処理
} catch (e: Exception) {
    // 一般例外の処理
} finally {
    // 終了処理
}
```

### 5.3 エラーメッセージ設計
| エラーコード | エラーメッセージ | 表示条件 |
|-------------|----------------|----------|
| E001 | [エラーメッセージ] | [表示条件] |
| E002 | [エラーメッセージ] | [表示条件] |

## 6. テスト設計
### 6.1 テスト観点
- **機能テスト**: [正常系/異常系の動作確認]
- **パフォーマンステスト**: [レスポンス時間、負荷耐性]
- **セキュリティテスト**: [認証、認可、入力検証]
- **ユーザビリティテスト**: [操作性、使いやすさ]

### 6.2 テストケース
| テストケースID | テスト内容 | 期待結果 | 備考 |
|---------------|-----------|----------|------|
| TC001 | [テスト内容] | [期待結果] | [備考] |
| TC002 | [テスト内容] | [期待結果] | [備考] |

### 6.3 テストデータ
```kotlin
// テストデータ例
val testData = listOf(
    DataModel(id = "1", name = "テストデータ1"),
    DataModel(id = "2", name = "テストデータ2")
)
```

## 7. 実装時の注意事項
### 7.1 パフォーマンス考慮事項
- [パフォーマンス向上のための実装ポイント]
- [避けるべき実装パターン]

### 7.2 セキュリティ考慮事項
- [セキュリティリスクと対策]
- [入力検証の実装方法]

### 7.3 保守性考慮事項
- [コードの可読性向上のポイント]
- [将来の拡張性への配慮]

## 8. 参考資料
- [関連する仕様書]
- [参考URL]
- [技術資料]

## 9. 補足事項
[その他、実装時に参考となる情報] 